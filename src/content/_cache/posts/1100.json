{
  "id": 1100,
  "slug": "implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js",
  "date": "2025-08-23T15:34:34",
  "modified": "2025-08-23T21:29:43",
  "title": "Implementing Post View Counters in a Headless WordPress Setup with Next.js",
  "content": "<p>Headless CMS architectures are becoming more popular in modern web development because they are flexible and improve performance. Developers can make fast, dynamic sites that use WordPress&#8217;s powerful content management features by separating the backend (like WordPress) from the frontend (like Next.js). However, some features, like tracking and showing how many people have seen a post, need to be carefully integrated using REST APIs.</p>\n<p>This post will show you how to add view counters to your blog posts when you use WordPress and Next.js without a head. To make things easier, we will use the well-known &#8220;Post Views Counter&#8221; plugin, turn on its REST API mode, and set up a custom endpoint. This method makes sure that tracking is accurate without using standard WordPress themes.</p>\n<h2>Why it is important to have view counters in a website</h2>\n<p>View counters give you useful information about how popular and engaging your content is. Plugins make this easy with shortcodes or theme hooks on a regular WordPress site. But if you use Next.js to build the front end of a headless site, you have to use WordPress&#8217;s REST API to talk to it. This means getting post data (including views) on the server side during server-side rendering (SSR) or static site generation (SSG) and adding counts on the client side to get real user views.</p>\n<p><strong>What is the problem?</strong> A lot of plugins do not show view counts in the best way for apps that use APIs. That is when personalization comes into play.</p>\n<h2>Step 1: Set up and install the Post Views Counter plugin</h2>\n<p>The first step is to install the free &#8220;<a href=\"https://wordpress.org/plugins/post-views-counter/\" target=\"_blank\" rel=\"noopener\">Post Views Counter</a>&#8221; plugin from the WordPress plugin repository. It is light and has more than 100,000 active installations. It also works with REST API for headless use.</p>\n<ol>\n<li>Go to your WordPress admin dashboard and log in.</li>\n<li>To install or activate &#8220;Post Views Counter,&#8221; go to <strong>Plugins &gt; Add New</strong> and search for it.</li>\n<li>Go to <strong>Post Views</strong> tab and then <strong>Counter Mode</strong>.</li>\n<li>Choose <strong>REST API</strong> from the list of options in Counter Mode. This lets you count using an API, which is important for headless setups because it does not need PHP to run in themes or JavaScript to run in the browser.</li>\n<li>Set up other options:\n<ul>\n<li><strong>Post Types:</strong> Check the box next to &#8220;post&#8221; (or any other type you want).</li>\n<li>Set the time between counts to &#8220;1 day&#8221; to get unique views per user.</li>\n</ul>\n</li>\n<li>To register the new routes, save your changes and flush the permalinks (<strong>Settings &gt; Permalinks &gt; Save Changes</strong>).</li>\n</ol>\n<p>With this, the plugin keeps track of views in post meta (<code>post_views_count</code>) and adds an endpoint for adding views: <code>POST /wp-json/post-views-counter/view-post/{post_id}</code>.</p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" wp-image-1103 aligncenter\" src=\"https://cms.mdpabel.com/wp-content/uploads/2025/08/post-view-counter-300x157.png\" alt=\"\" width=\"826\" height=\"432\" srcset=\"https://cms.mdpabel.com/wp-content/uploads/2025/08/post-view-counter-300x157.png 300w, https://cms.mdpabel.com/wp-content/uploads/2025/08/post-view-counter-1024x535.png 1024w, https://cms.mdpabel.com/wp-content/uploads/2025/08/post-view-counter-768x402.png 768w, https://cms.mdpabel.com/wp-content/uploads/2025/08/post-view-counter.png 1536w\" sizes=\"auto, (max-width: 826px) 100vw, 826px\" /></p>\n<h2>Step 2: The Limitation and Why We Need a Custom Endpoint</h2>\n<p>The default increment endpoint works perfectly; it follows rules for uniqueness (like using local storage or cookies) and updates the count on the server. But its answer does not include the new total number of views. It gives back something like this:</p>\n<pre><code>{\r\n  \"post_id\": 1093,\r\n  \"counted\": true,\r\n  \"storage\": {\r\n    \"name\": [\"pvc_visits[0]\"],\r\n    \"value\": [\"1756048474b1093\"],\r\n    \"expiry\": [1756048474]\r\n  },\r\n  \"type\": \"post\"\r\n}</code></pre>\n<p>To make this work, we will make a custom REST API endpoint that adds to the view count and sends back the new count in one response.</p>\n<h2>Step 3: Putting the Custom Endpoint in functions.php</h2>\n<p>Change the <code>functions.php</code> file for your theme (or make a custom plugin to make it easier to keep up with). Put in the following code:</p>\n<pre><code>// Custom REST API endpoint to get and add to the view count\r\nadd_action('rest_api_init', function() {\r\n    register_rest_route('custom/v1', '/post-views/(?P&lt;id&gt;\\d+)', array(\r\n        'methods' =&gt; 'POST',\r\n        'callback' =&gt; 'custom_increment_and_get_views',\r\n        'permission_callback' =&gt; '__return_true', // Public; add auth for safety\r\n        'args' =&gt; array(\r\n            'id' =&gt; array(\r\n                'validate_callback' =&gt; function($param) {\r\n                    return is_numeric($param) &amp;&amp; get_post($param);\r\n                },\r\n            ),\r\n        ),\r\n    ));\r\n});\r\n\r\nfunction custom_increment_and_get_views($request) {\r\n    $post_id = $request['id'];\r\n    \r\n    if (!function_exists('pvc_view_post') || !function_exists('pvc_get_post_views')) {\r\n        return new WP_Error('plugin_missing', 'Post Views Counter functions not found.', array('status' =&gt; 500));\r\n    }\r\n    \r\n    // Add one more view to the post\r\n    pvc_view_post($post_id);\r\n    \r\n    // Get the new total\r\n    $views = pvc_get_post_views($post_id);\r\n    \r\n    return array(\r\n        'post_id' =&gt; $post_id,\r\n        'views' =&gt; $views,\r\n        'success' =&gt; true,\r\n    );\r\n}</code></pre>\n<ul>\n<li><strong>Endpoint:</strong> <code>POST /wp-json/custom/v1/post-views/{post_id}</code></li>\n<li><strong>Example response:</strong> <code>{\"post_id\":1093,\"views\":42,\"success\":true}</code></li>\n<li><strong>Benefits:</strong> One call for both increment and fetch. It uses the plugin&#8217;s built-in features, so it gets all of its settings, like uniqueness and exclusions.</li>\n</ul>\n<p>Use curl to test it: <code>curl -X POST https://your-site.com/wp-json/custom/v1/post-views/1093</code>. Add nonce checks or API keys to make it safe in production.</p>\n<h2>Step 4: Working with Next.js</h2>\n<p>In your Next.js app, use <code>getStaticProps</code> or <code>getServerSideProps</code> to get the initial post data, which includes views. Then, on page load, use a <code>useEffect</code> hook to call the custom endpoint and update the display with the count that comes back.</p>\n<p>In <code>pages/posts/[slug].js</code>, for example:</p>\n<pre><code>import { useEffect, useState } from \"react\";\r\n\r\nexport default function Post({ post }) {\r\n    const [views, setViews] = useState(post.meta?.post_views_count || 0);\r\n\r\n    useEffect(() =&gt; {\r\n        const handleViews = async () =&gt; {\r\n            const storageKey = \"pvc_visits[0]\";\r\n            \r\n            // Check if already viewed\r\n            if (localStorage.getItem(storageKey)) return;\r\n\r\n            try {\r\n                const response = await fetch(`https://your-site.com/wp-json/custom/v1/post-views/${post.id}`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                });\r\n                \r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setViews(data.views);\r\n                    // Set storage for uniqueness\r\n                    localStorage.setItem(storageKey, `some-value-b${post.id}`);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error:', error);\r\n            }\r\n        };\r\n\r\n        handleViews();\r\n    }, [post.id]);\r\n\r\n    return (\r\n        &lt;div&gt;\r\n            &lt;h1&gt;{post.title.rendered}&lt;/h1&gt;\r\n            &lt;p&gt;Views: {views}&lt;/p&gt;\r\n            {/* Content of the post */}\r\n        &lt;/div&gt;\r\n    );\r\n}\r\n</code></pre>\n<p>This uses Incremental Static Regeneration (ISR) to refresh the page every so often and <code>localStorage</code> to mimic the plugin&#8217;s unique logic.</p>\n<h2>Final Thoughts</h2>\n<p>You can easily keep track of and show view counts in your headless WordPress + Next.js blog by turning on REST API mode in Post Views Counter and adding a custom endpoint. This setup works well, is accurate, and is easy to keep up with. If your endpoint gets a lot of traffic, you might want to add caching (like with Redis) or rate limiting.</p>\n<p>Have you done something like this before? Please tell us about your experiences in the comments. If you want to learn more about headless CMS, read my other posts about how to make Next.js faster.</p>\n",
  "excerpt": "<p>Headless CMS architectures are becoming more popular in modern web development because they are flexible and improve performance. Developers can make fast, dynamic sites that use WordPress&#8217;s powerful content management features by separating the backend (like WordPress) from the frontend (like Next.js). However, some features, like tracking and showing how many people have seen a [&hellip;]</p>\n",
  "link": "https://cms.mdpabel.com/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/",
  "yoastHead": "<link rel=\"canonical\" href=\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\" />\n<!-- This site is optimized with the Yoast SEO Premium plugin v25.9 (Yoast SEO v26.8) - https://yoast.com/product/yoast-seo-premium-wordpress/ -->\n<title>Implementing Post View Counters in a Headless WordPress Setup with Next.js - MD Pabel</title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" />\n<meta property=\"og:locale\" content=\"en_US\" />\n<meta property=\"og:type\" content=\"article\" />\n<meta property=\"og:title\" content=\"Implementing Post View Counters in a Headless WordPress Setup with Next.js\" />\n<meta property=\"og:description\" content=\"Headless CMS architectures are becoming more popular in modern web development because they are flexible and improve performance. Developers can make fast, dynamic sites that use WordPress&#8217;s powerful content management features by separating the backend (like WordPress) from the frontend (like Next.js). However, some features, like tracking and showing how many people have seen a [&hellip;]\" />\n<meta property=\"og:url\" content=\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\" />\n<meta property=\"og:site_name\" content=\"MD Pabel\" />\n<meta property=\"article:author\" content=\"https://www.mdpabel.com/author/mdpabel/\" />\n<meta property=\"article:published_time\" content=\"2025-08-23T15:34:34+00:00\" />\n<meta property=\"article:modified_time\" content=\"2025-08-23T21:29:43+00:00\" />\n<meta property=\"og:image\" content=\"https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1-1024x683.png\" />\n\t<meta property=\"og:image:width\" content=\"1024\" />\n\t<meta property=\"og:image:height\" content=\"683\" />\n\t<meta property=\"og:image:type\" content=\"image/png\" />\n<meta name=\"author\" content=\"MD Pabel\" />\n<meta name=\"twitter:card\" content=\"summary_large_image\" />\n<meta name=\"twitter:label1\" content=\"Written by\" />\n\t<meta name=\"twitter:data1\" content=\"MD Pabel\" />\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" />\n\t<meta name=\"twitter:data2\" content=\"5 minutes\" />\n<script type=\"application/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https://schema.org\",\"@graph\":[{\"@type\":\"TechArticle\",\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\",\"isPartOf\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"author\":{\"name\":\"MD Pabel\",\"@id\":\"https://www.mdpabel.com/#/schema/person/73e3797b5dc8d6434e9e35e1708bb0c4\"},\"headline\":\"Implementing Post View Counters in a Headless WordPress Setup with Next.js\",\"datePublished\":\"2025-08-23T15:34:34+00:00\",\"dateModified\":\"2025-08-23T21:29:43+00:00\",\"mainEntityOfPage\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"wordCount\":778,\"commentCount\":0,\"image\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"thumbnailUrl\":\"https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1.png?wsr\",\"articleSection\":[\"Headless Nextjs\",\"Headless WordPress\"],\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"]}]},{\"@type\":\"WebPage\",\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\",\"url\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\",\"name\":\"Implementing Post View Counters in a Headless WordPress Setup with Next.js - MD Pabel\",\"isPartOf\":{\"@id\":\"https://www.mdpabel.com/#website\"},\"primaryImageOfPage\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"image\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"thumbnailUrl\":\"https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1.png?wsr\",\"datePublished\":\"2025-08-23T15:34:34+00:00\",\"dateModified\":\"2025-08-23T21:29:43+00:00\",\"author\":{\"@id\":\"https://www.mdpabel.com/#/schema/person/73e3797b5dc8d6434e9e35e1708bb0c4\"},\"breadcrumb\":{\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\"]}]},{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\",\"url\":\"https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1.png?wsr\",\"contentUrl\":\"https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1.png?wsr\",\"width\":1536,\"height\":1024},{\"@type\":\"BreadcrumbList\",\"@id\":\"https://www.mdpabel.com/blog/implementing-post-view-counters-in-a-headless-wordpress-setup-with-next-js/\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https://www.mdpabel.com/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Implementing Post View Counters in a Headless WordPress Setup with Next.js\"}]},{\"@type\":\"WebSite\",\"@id\":\"https://www.mdpabel.com/#website\",\"url\":\"https://www.mdpabel.com/\",\"name\":\"MD Pabel\",\"description\":\"Full Stack Developer, Malware Removal &amp; Security Specialist\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https://www.mdpabel.com/blog/?s={search_term_string}\"},\"query-input\":{\"@type\":\"PropertyValueSpecification\",\"valueRequired\":true,\"valueName\":\"search_term_string\"}}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https://www.mdpabel.com/#/schema/person/73e3797b5dc8d6434e9e35e1708bb0c4\",\"name\":\"MD Pabel\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https://www.mdpabel.com/#/schema/person/image/\",\"url\":\"https://secure.gravatar.com/avatar/b6b48a60efe9dc8cd04d4a7e5c9b22cafd47332f65a407ce270e8ad7f8843372?s=96&d=mm&r=g\",\"contentUrl\":\"https://secure.gravatar.com/avatar/b6b48a60efe9dc8cd04d4a7e5c9b22cafd47332f65a407ce270e8ad7f8843372?s=96&d=mm&r=g\",\"caption\":\"MD Pabel\"},\"description\":\"MD Pabel is the Founder and CEO of 3Zero Digital, a leading agency specializing in custom web development, WordPress security, and malware removal. With over 7+ Years of experience, he has completed more than3200+ projects, served over 2300+ clients, and resolved4500+ cases of malware and hacked websites.\",\"sameAs\":[\"https://www.mdpabel.com/\",\"https://www.facebook.com/in/mdpabe1\",\"https://www.linkedin.com/in/mdpabe1\"],\"url\":\"https://www.mdpabel.com/author/mdpabel/\"}]}</script>\n<!-- / Yoast SEO Premium plugin. -->",
  "featuredImage": {
    "url": "https://cms.mdpabel.com/wp-content/uploads/2025/08/headless-post-view-counter-1.png",
    "alt": ""
  },
  "categories": [
    {
      "id": 37,
      "name": "Headless Nextjs",
      "slug": "headless-nextjs"
    },
    {
      "id": 36,
      "name": "Headless WordPress",
      "slug": "headless-wordpress"
    }
  ],
  "acf": {}
}