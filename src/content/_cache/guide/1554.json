{
  "id": 1554,
  "slug": "fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip",
  "date": "2025-11-07T00:14:02",
  "modified": "2025-11-06T18:15:10",
  "title": "Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP",
  "content": "<p>If you’ve ever integrated services like <a href=\"https://www.mailgun.com/\" target=\"_blank\" rel=\"noopener\">Mailgun</a>, <a href=\"https://sendgrid.com/\" target=\"_blank\" rel=\"noopener\">SendGrid</a>, or <a href=\"https://aws.amazon.com/ses/\" target=\"_blank\" rel=\"noopener\">Amazon SES</a>, You might have seen one of these messages when trying to connect your website or application to Mailgun (or any SMTP-based email service):</p>\n<p>&#8220;Request blocked — please whitelist your server’s IP.&#8221;<br />\n&#8220;Mailgun API Error&#8221;<br />\n&#8220;Forbidden&#8221;<br />\n&#8220;Authentication failed: 535 Incorrect authentication data&#8221;<br />\n&#8220;SMTP Error: Could not connect to SMTP host.&#8221;<br />\n&#8220;Authentication unsuccessful, the user name or password is incorrect.&#8221;<br />\n&#8220;Access denied. IP not allowed.&#8221;<br />\n&#8220;Connection timed out or refused by remote server.&#8221;<br />\n&#8220;Error 401: Unauthorized&#8221;<br />\n&#8220;Error 403: Forbidden&#8221;<br />\n&#8220;550 5.7.1 Relaying denied&#8221;<br />\n&#8220;535 5.7.8 Authentication credentials invalid&#8221;</p>\n<p>You check your hosting panel, find your site’s IP address… but the email provider reports a completely different one!</p>\n<p>So why are they different — and which one do you actually need to whitelist? Let’s clear up the confusion.</p>\n<h2>Inbound vs. Outbound IPs — The Key Difference</h2>\n<p>Every web server has two directions of communication:</p>\n<ul>\n<li><b>Inbound IP</b> → the address where visitors access your website (shown in your hosting control panel).</li>\n<li><b>Outbound IP</b> → the address your server uses when it sends requests to external services, APIs, or email servers.</li>\n</ul>\n<p>They are often not the same — especially on shared or cloud hosting platforms.</p>\n<h2>Why Outbound IPs Are Different</h2>\n<p>Hosting providers such as <a href=\"https://siteground.com/\" target=\"_blank\" rel=\"noopener\">SiteGround</a>, <a href=\"https://www.cloudways.com/\" target=\"_blank\" rel=\"noopener\">Cloudways</a>, <a href=\"https://cloud.google.com/\" target=\"_blank\" rel=\"noopener\">Google Cloud,</a> or <a href=\"https://aws.amazon.com/\" target=\"_blank\" rel=\"noopener\">AWS</a> use a network setup called <b>NAT (Network Address Translation)</b>. Here’s how it works:</p>\n<ol>\n<li>Your site has its own inbound IP (for incoming visitors).</li>\n<li>But all outbound traffic (like API calls or SMTP connections) goes through a shared gateway that has its own IP.</li>\n</ol>\n<p>This shared gateway helps:</p>\n<ul>\n<li>Control and monitor outgoing traffic.</li>\n<li>Improve security and firewall filtering.</li>\n<li>Provide better performance and redundancy.</li>\n</ul>\n<p>So when your website sends a request to an external service like Mailgun, that service sees the outbound NAT IP, not your site’s visible IP.</p>\n<h2>Example: When Mailgun Blocks Your Request</h2>\n<p>Imagine this scenario:</p>\n<p>You integrate Mailgun with your website to send emails. You test it — but Mailgun rejects the request, saying it came from a different IP.</p>\n<p>You check your hosting dashboard and see one IP (for example, <code>123.45.67.89</code>), but Mailgun says the request came from another (for example, <code>123.45.70.10</code>).</p>\n<p>In this case, Mailgun is correct. That second address (<code>123.45.70.10</code>) is your server’s outbound IP — the one you need to whitelist.</p>\n<h2>Mailgun’s IP Allowlist Update (April 2024)</h2>\n<p>Mailgun released a major update in April 2024 that affected how IP allowlisting works. Previously, the IP Allowlist only applied to API requests, but now it also covers <b>SMTP connections</b>. This change enhances account security but can cause confusion if your site’s outbound IP is not listed correctly.</p>\n<p>According to Mailgun’s official support response, if your connecting client IP (the one your server uses for outbound connections) is not on your allowlist, your request will permanently fail and trigger an <b>“Authentication Failed”</b> or <b>“Forbidden”</b> error.</p>\n<p>Here’s what you should do:</p>\n<ol>\n<li>Log in to your Mailgun account.</li>\n<li>Go to <b>Profile → IP Access Management</b> or visit <a href=\"https://app.mailgun.com/settings/ip-access-management\" target=\"_blank\" rel=\"noopener\">Mailgun IP Access Management</a>.</li>\n<li>Click the <b>Add IP Addresses</b> button.</li>\n<li>Enter your server’s outbound IP (you can find it using the method below).</li>\n<li>Add a short description (like “Site Outbound IP”) and save the entry.</li>\n</ol>\n<p>Once added, Mailgun will allow your SMTP or API requests to go through without authentication errors.</p>\n<p>If you previously had other IPs listed, but they’re no longer valid, you can remove them — or simply clear all entries to disable the allowlist entirely.</p>\n<p>Official guide: <a href=\"https://help.mailgun.com/hc/en-us/articles/360012244474-IP-Allowlist\" target=\"_blank\" rel=\"noopener\">Mailgun IP Allowlist Help Article</a>.</p>\n<h2>How to Find Your Server’s Outbound IP</h2>\n<p>To successfully whitelist your server on Mailgun, you first need to identify your outbound IP. Here are three easy ways to do it:</p>\n<h3>Option 1: Using a Simple PHP Script</h3>\n<p>Create a file named <b>whatsmyip.php</b> in your site’s root folder and paste this code:</p>\n<pre><code>&lt;?php echo file_get_contents('https://api.ipify.org'); ?&gt; </code></pre>\n<p>Then visit: https://yourdomain.com/whatsmyip.php</p>\n<p>It will display something like:</p>\n<pre><code>123.45.70.10 </code></pre>\n<p>That’s your outbound IP — the one Mailgun (or any API) sees. Once you get it, delete the file for security.</p>\n<h3>Option 2: Using SSH Access</h3>\n<p>If you have SSH access to your hosting account, run this command:</p>\n<pre><code>curl https://api.ipify.org </code></pre>\n<p>It will return the same result — your outbound IP in plain text.</p>\n<h3>Option 3: Automate It for Multiple Sites</h3>\n<p>If you manage multiple websites, you can use this small PHP script to email you the outbound IP automatically:</p>\n<pre><code>&lt;?php $ip = file_get_contents('https://api.ipify.org'); mail('you@yourdomain.com', 'Outbound IP', \"Your server's outbound IP is: $ip\"); ?&gt; </code></pre>\n<p>This is handy when you maintain many client websites and need to whitelist IPs quickly.</p>\n<h2>Quick Reference Table</h2>\n<ul>\n<li><b>Inbound IP</b> – Where visitors access your website (e.g., 123.45.67.89)</li>\n<li><b>Outbound IP</b> – Where your server connects from (e.g., 123.45.70.10)</li>\n</ul>\n<h2>In Summary</h2>\n<p>If a service like Mailgun or SendGrid reports that your request came from a different IP than expected — don’t panic. It’s normal on shared or managed hosting environments that use NAT routing.</p>\n<p>Simply identify your outbound IP using one of the methods above and whitelist that address in Mailgun’s IP Access Management. Once done, your authentication errors will disappear, and you’ll be able to send emails smoothly again.</p>\n<h2>Frequently Asked Questions (FAQ)</h2>\n<h3>1. Why can’t my hosting provider show me the outbound IP directly?</h3>\n<p>Most shared and cloud platforms use dynamic or shared outbound gateways that can change occasionally. That’s why they usually don’t list them in the control panel.</p>\n<h3>2. Will the outbound IP change over time?</h3>\n<p>Yes, it’s possible. If your hosting provider moves your site to another node or updates their network, your outbound IP might change. If Mailgun or another service stops working suddenly, check it again.</p>\n<h3>3. Is it safe to share or whitelist my outbound IP?</h3>\n<p>Yes — outbound IPs are public and visible whenever your server makes requests. Whitelisting it simply tells external services to allow your traffic.</p>\n<h3>4. What happens if multiple sites on the same server use the same outbound IP?</h3>\n<p>That’s completely normal. Many websites on the same node will share the same outbound IP for outgoing connections.</p>\n<h3>5. How can I make sure my outbound IP doesn’t change?</h3>\n<p>You’ll need a dedicated hosting environment or VPS. Dedicated servers or cloud instances with static IPs (like AWS Elastic IPs) guarantee the same inbound and outbound address.</p>\n<h3>6. Why did my Mailgun API or SMTP connection suddenly stop working?</h3>\n<p>Mailgun updated their security in April 2024 to include outbound IP verification. If your site’s outbound IP isn’t on the allowlist, Mailgun will reject the connection with a “Forbidden” or “Authentication Failed” error. Simply add your current outbound IP to the IP Access Management section in Mailgun.</p>\n<h2>Final Thoughts</h2>\n<p>Understanding the difference between inbound and outbound IPs — and keeping your Mailgun allowlist updated — helps prevent unnecessary API and SMTP connection issues. Next time you see an authentication error, test your outbound IP and whitelist it. It’s a quick fix that keeps your email system running smoothly.</p>\n",
  "excerpt": "",
  "link": "https://cms.mdpabel.com/guide/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/",
  "yoastHead": "<link rel=\"canonical\" href=\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\" />\n<!-- This site is optimized with the Yoast SEO Premium plugin v25.9 (Yoast SEO v26.8) - https://yoast.com/product/yoast-seo-premium-wordpress/ -->\n<title>Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP - MD Pabel</title>\n<meta name=\"description\" content=\"If you’re getting Mailgun “Authentication Failed” or “Forbidden” errors, your server IP may not be whitelisted. Here’s how to identify your correct outbound IP and add it to Mailgun’s IP Access Management step-by-step.\" />\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" />\n<meta property=\"og:locale\" content=\"en_US\" />\n<meta property=\"og:type\" content=\"article\" />\n<meta property=\"og:title\" content=\"Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP\" />\n<meta property=\"og:description\" content=\"If you’re getting Mailgun “Authentication Failed” or “Forbidden” errors, your server IP may not be whitelisted. Here’s how to identify your correct outbound IP and add it to Mailgun’s IP Access Management step-by-step.\" />\n<meta property=\"og:url\" content=\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\" />\n<meta property=\"og:site_name\" content=\"MD Pabel\" />\n<meta property=\"article:modified_time\" content=\"2025-11-06T18:15:10+00:00\" />\n<meta name=\"twitter:card\" content=\"summary_large_image\" />\n<meta name=\"twitter:label1\" content=\"Est. reading time\" />\n\t<meta name=\"twitter:data1\" content=\"5 minutes\" />\n<script type=\"application/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https://schema.org\",\"@graph\":[{\"@type\":\"TechArticle\",\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\",\"isPartOf\":{\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\"},\"author\":{\"name\":\"MD Pabel\",\"@id\":\"https://www.mdpabel.com/#/schema/person/73e3797b5dc8d6434e9e35e1708bb0c4\"},\"headline\":\"Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP\",\"datePublished\":\"2025-11-06T18:14:02+00:00\",\"dateModified\":\"2025-11-06T18:15:10+00:00\",\"mainEntityOfPage\":{\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\"},\"wordCount\":1130,\"commentCount\":0,\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\"]}]},{\"@type\":\"WebPage\",\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\",\"url\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\",\"name\":\"Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP - MD Pabel\",\"isPartOf\":{\"@id\":\"https://www.mdpabel.com/#website\"},\"datePublished\":\"2025-11-06T18:14:02+00:00\",\"dateModified\":\"2025-11-06T18:15:10+00:00\",\"description\":\"If you’re getting Mailgun “Authentication Failed” or “Forbidden” errors, your server IP may not be whitelisted. Here’s how to identify your correct outbound IP and add it to Mailgun’s IP Access Management step-by-step.\",\"breadcrumb\":{\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https://www.mdpabel.com/guides/fix-mailgun-authentication-failed-error-how-to-find-and-whitelist-the-right-outbound-ip/\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"name\":\"Home\",\"item\":\"https://www.mdpabel.com/\"},{\"@type\":\"ListItem\",\"position\":2,\"name\":\"Fix Mailgun “Authentication Failed” Error: How to Find and Whitelist the Right Outbound IP\"}]},{\"@type\":\"WebSite\",\"@id\":\"https://www.mdpabel.com/#website\",\"url\":\"https://www.mdpabel.com/\",\"name\":\"MD Pabel\",\"description\":\"Full Stack Developer, Malware Removal &amp; Security Specialist\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https://www.mdpabel.com/blog/?s={search_term_string}\"},\"query-input\":{\"@type\":\"PropertyValueSpecification\",\"valueRequired\":true,\"valueName\":\"search_term_string\"}}],\"inLanguage\":\"en-US\"}]}</script>\n<!-- / Yoast SEO Premium plugin. -->",
  "categories": [],
  "acf": {}
}